<!DOCTYPE html>
<html>
<head>
    <title>{% block title %}Inference{% endblock %}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="/static/css/modern.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
    <nav class="modern-nav">
        <div class="max-w-7xl mx-auto px-4 flex justify-between items-center">
            <a href="/" class="brand">üß† Inference</a>
            <div class="flex gap-2 items-center">
                {% if user %}
                    <a href="/dashboard">Dashboard</a>
                    <a href="/leaderboards">Leaderboards</a>
                    
                    <!-- Profile Link - Click photo or name to go to profile -->
                    <a href="/profile" style="display: flex; align-items: center; gap: 0.75rem; padding: 0.5rem 1rem; background: var(--glass-bg); border: 1px solid var(--glass-border); border-radius: 0.5rem; text-decoration: none; transition: all 250ms; cursor: pointer;"
                       onmouseover="this.style.background = 'rgba(99, 102, 241, 0.1)'; this.style.borderColor = 'var(--primary)'"
                       onmouseout="this.style.background = 'var(--glass-bg)'; this.style.borderColor = 'var(--glass-border)'">
                        {% if user.avatar %}
                        <img src="{{ user.avatar }}" alt="{{ user.display_name }}" 
                             style="width: 32px; height: 32px; border-radius: 50%; object-fit: cover; border: 2px solid var(--primary);">
                        {% else %}
                        <div style="width: 32px; height: 32px; border-radius: 50%; background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%); display: flex; align-items: center; justify-content: center; font-size: 0.75rem; font-weight: bold; color: white;">
                            {{ user.display_name[0].upper() }}
                        </div>
                        {% endif %}
                        <span style="font-size: 0.875rem; color: var(--text-primary); font-weight: 500;">{{ user.display_name }}</span>
                    </a>
                    
                    <a href="/logout" class="btn btn-secondary text-sm px-4 py-2">Logout</a>
                {% else %}
                    <a href="/leaderboards">Leaderboards</a>
                    <a href="/login" class="btn btn-primary text-sm px-4 py-2 ml-2">Login</a>
                {% endif %}
                <button class="theme-toggle" id="themeToggle" onclick="toggleTheme()"></button>
            </div>
        </div>
    </nav>
    <main class="max-w-7xl mx-auto px-4 py-8">
        {% block content %}{% endblock %}
    </main>

    <script>
        // Initialize theme
        function initTheme() {
            const savedTheme = localStorage.getItem('theme') || 'night';
            document.body.classList.toggle('day-mode', savedTheme === 'night' ? false : true);
            updateThemeButton(savedTheme);
        }

        function toggleTheme() {
            const currentTheme = localStorage.getItem('theme') || 'night';
            const newTheme = currentTheme === 'night' ? 'day' : 'night';
            
            localStorage.setItem('theme', newTheme);
            document.body.classList.toggle('day-mode', newTheme === 'day');
            updateThemeButton(newTheme);
        }

        function updateThemeButton(theme) {
            const button = document.getElementById('themeToggle');
            button.textContent = theme === 'night' ? '‚òÄÔ∏è' : 'üåô';
        }

        // Initialize on page load
        initTheme();
    </script>
</body>
</html>