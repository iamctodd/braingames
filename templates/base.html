<!DOCTYPE html>
<html>
<head>
    <title>{% block title %}Brain Games{% endblock %}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="/static/css/modern.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
    <nav class="modern-nav">
        <div class="max-w-7xl mx-auto px-4 flex justify-between items-center">
            <a href="/" class="brand">üß† Brain Games</a>
            <div class="flex gap-2 items-center">
                <a href="/">Games</a>
                {% if user %}
                    <a href="/dashboard">Dashboard</a>
                    <a href="/leaderboards">Leaderboards</a>
                    <a href="/profile">Profile</a>
                    <div class="flex items-center gap-3 ml-4">
                        {% if user.avatar %}
                        <img src="{{ user.avatar }}" alt="{{ user.display_name }}" 
                             class="w-8 h-8 rounded-full object-cover border-2 border-primary">
                        {% else %}
                        <div class="w-8 h-8 rounded-full bg-gradient-to-br from-primary to-secondary flex items-center justify-center text-sm font-bold text-white">
                            {{ user.display_name[0].upper() }}
                        </div>
                        {% endif %}
                        <span class="text-sm font-medium">{{ user.display_name }}</span>
                        <a href="/logout" class="btn btn-secondary text-sm px-4 py-2">Logout</a>
                    </div>
                {% else %}
                    <a href="/leaderboards">Leaderboards</a>
                    <a href="/login" class="btn btn-primary text-sm px-4 py-2 ml-2">Login</a>
                {% endif %}
                <button class="theme-toggle" id="themeToggle" onclick="toggleTheme()"></button>
            </div>
        </div>
    </nav>
    <main class="max-w-7xl mx-auto px-4 py-8">
        {% block content %}{% endblock %}
    </main>

    <script>
        // Initialize theme
        function initTheme() {
            const savedTheme = localStorage.getItem('theme') || 'night';
            document.body.classList.toggle('day-mode', savedTheme === 'night' ? false : true);
            updateThemeButton(savedTheme);
        }

        function toggleTheme() {
            const currentTheme = localStorage.getItem('theme') || 'night';
            const newTheme = currentTheme === 'night' ? 'day' : 'night';
            
            localStorage.setItem('theme', newTheme);
            document.body.classList.toggle('day-mode', newTheme === 'day');
            updateThemeButton(newTheme);
        }

        function updateThemeButton(theme) {
            const button = document.getElementById('themeToggle');
            button.textContent = theme === 'night' ? '‚òÄÔ∏è' : 'üåô';
        }

        // Initialize on page load
        initTheme();
    </script>
</body>
</html>
